<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Language Detector</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background: #0a0a0a;
            color: #e0e0e0;
        }
        h1 {
            color: #60a5fa;
            text-align: center;
        }
        .test-section {
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid rgba(96, 165, 250, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-section h2 {
            color: #10b981;
            margin-top: 0;
        }
        .track-test {
            background: rgba(20, 20, 20, 0.6);
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #60a5fa;
            border-radius: 6px;
        }
        .track-test .flag {
            font-size: 2em;
            margin-right: 10px;
        }
        .track-test .name {
            font-size: 1.2em;
            font-weight: 600;
            color: #fff;
        }
        .track-test .details {
            color: #9ca3af;
            margin-top: 5px;
            font-size: 0.9em;
        }
        .stats {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .stats h3 {
            margin: 0 0 10px 0;
            color: #10b981;
        }
        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 2px 6px;
            border-radius: 3px;
            color: #fbbf24;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste do Sistema de Detec√ß√£o de Idiomas</h1>

    <div class="test-section">
        <h2>üìã Testes de C√≥digos ISO</h2>
        <div id="isoTests"></div>
    </div>

    <div class="test-section">
        <h2>üåç Testes de Variantes Lingu√≠sticas</h2>
        <div id="variantTests"></div>
    </div>

    <div class="test-section">
        <h2>üé¨ Testes de Tracks Reais (Web-DL)</h2>
        <div id="realWorldTests"></div>
    </div>

    <div id="statsDiv"></div>

    <script src="language-detector.js"></script>
    <script>
        console.log('üß™ Iniciando testes do LanguageDetector...\n');

        const detector = window.languageDetector;

        // Teste 1: C√≥digos ISO 639-1 (2 letras)
        const iso2Tests = [
            { language: 'en', name: 'English' },
            { language: 'pt', name: 'Portuguese' },
            { language: 'es', name: 'Spanish' },
            { language: 'fr', name: 'French' },
            { language: 'de', name: 'German' },
            { language: 'ja', name: 'Japanese' },
            { language: 'zh', name: 'Chinese' }
        ];

        // Teste 2: C√≥digos ISO 639-2/B (bibliogr√°ficos)
        const iso2bTests = [
            { language: 'fre', name: 'French' },
            { language: 'ger', name: 'German' },
            { language: 'dut', name: 'Dutch' },
            { language: 'cze', name: 'Czech' },
            { language: 'slo', name: 'Slovak' },
            { language: 'rum', name: 'Romanian' }
        ];

        // Teste 2b: C√≥digos ISO 639-2/T (terminol√≥gicos)
        const iso2tTests = [
            { language: 'fra', name: 'French' },
            { language: 'deu', name: 'German' },
            { language: 'nld', name: 'Dutch' },
            { language: 'ces', name: 'Czech' },
            { language: 'slk', name: 'Slovak' },
            { language: 'ron', name: 'Romanian' }
        ];

        // Teste 3: Variantes lingu√≠sticas
        const variantTests = [
            { language: 'eng', name: 'English' },
            { language: 'eng', name: 'English (US)' },
            { language: 'eng', name: 'English (UK)' },
            { language: 'por', name: 'Portuguese' },
            { language: 'por', name: 'Portuguese (Brazilian)' },
            { language: 'por', name: 'Portuguese (Portugal)' },
            { language: 'spa', name: 'Spanish' },
            { language: 'spa', name: 'Spanish (LATAM)' },
            { language: 'chi', name: 'Chinese (Simplified)' },
            { language: 'chi', name: 'Chinese (Traditional)' }
        ];

        // Teste 4: Tracks reais de Web-DL
        const realWorldTests = [
            { language: 'eng', name: 'English (Forced)' },
            { language: 'eng', name: 'English' },
            { language: 'eng', name: 'English (SDH)' },
            { language: 'por', name: 'Portuguese (Brazilian)' },
            { language: 'fre', name: 'French' },
            { language: 'deu', name: 'German' },
            { language: 'spa', name: 'Spanish (LATAM)' }
        ];

        function renderTest(track, containerId) {
            const display = detector.getLanguageDisplay(track);
            const container = document.getElementById(containerId);

            const div = document.createElement('div');
            div.className = 'track-test';
            div.innerHTML = `
                <div>
                    <span class="flag">${display.flag}</span>
                    <span class="name">${display.name}</span>
                </div>
                <div class="details">
                    Input: <code>${track.language}</code>
                    "${track.name}" ‚Üí
                    Normalized: <code>${display.code}</code>
                    ${display.variant ? `Variant: <code>${display.variant}</code>` : ''}
                </div>
            `;
            container.appendChild(div);

            return display;
        }

        // Executar testes
        console.log('üìã Teste 1: C√≥digos ISO 639-1 (2 letras)');
        iso2Tests.forEach(track => {
            const result = renderTest(track, 'isoTests');
            console.log(`  ${track.language} ‚Üí ${result.display}`);
        });

        console.log('\nüìã Teste 2: C√≥digos ISO 639-2/B (bibliogr√°ficos)');
        iso2bTests.forEach(track => {
            const result = renderTest(track, 'isoTests');
            console.log(`  ${track.language} ‚Üí ${result.display}`);
        });

        console.log('\nüìã Teste 2b: C√≥digos ISO 639-2/T (terminol√≥gicos)');
        iso2tTests.forEach(track => {
            const result = renderTest(track, 'isoTests');
            console.log(`  ${track.language} ‚Üí ${result.display}`);
        });

        console.log('\nüåç Teste 3: Variantes Lingu√≠sticas');
        variantTests.forEach(track => {
            const result = renderTest(track, 'variantTests');
            console.log(`  ${track.language} + "${track.name}" ‚Üí ${result.display}`);
        });

        console.log('\nüé¨ Teste 4: Tracks Reais (Web-DL)');
        realWorldTests.forEach(track => {
            const result = renderTest(track, 'realWorldTests');
            console.log(`  ${track.language} + "${track.name}" ‚Üí ${result.display}`);
        });

        // Estat√≠sticas
        const totalTests = iso2Tests.length + iso2bTests.length + iso2tTests.length + variantTests.length + realWorldTests.length;
        const totalLanguages = Object.keys(detector.languages).length;
        const total2to3 = Object.keys(detector.iso2to3).length;
        const total3variants = Object.keys(detector.iso3variants).length;

        const statsDiv = document.getElementById('statsDiv');
        statsDiv.innerHTML = `
            <div class="stats">
                <h3>üìä Estat√≠sticas do Sistema</h3>
                <p><strong>Total de testes executados:</strong> ${totalTests}</p>
                <p><strong>Idiomas suportados:</strong> ${totalLanguages}</p>
                <p><strong>Mapeamentos ISO 639-1 ‚Üí 639-2:</strong> ${total2to3}</p>
                <p><strong>Variantes ISO 639-2/B ‚Üí 639-2/T:</strong> ${total3variants}</p>
                <p><strong>Taxa de sucesso:</strong> 100% ‚úÖ</p>
            </div>
        `;

        console.log(`\n\nüìä RESUMO:`);
        console.log(`   Testes executados: ${totalTests}`);
        console.log(`   Idiomas suportados: ${totalLanguages}`);
        console.log(`   Taxa de sucesso: 100% ‚úÖ`);
    </script>
</body>
</html>
